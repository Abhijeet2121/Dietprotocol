var selectedPhotosArea=document.querySelector(".selected-photos-area"),galleryCollection=document.querySelector(".gallery-collection"),photoBucket=document.querySelector(".photo-bucket"),loadingPhotos=document.querySelector(".loading-photos"),amount=document.querySelector(".chosen-avatars-amount"),filterForm=document.querySelector(".filter-form"),applySelectedFilters=document.querySelector(".apply-selected-filters"),showPopularAvatars=document.querySelector(".show-popular-avatars"),downloadAvatars=document.querySelector(".download-avatars"),photoBucketArray=[],queryParams="?popular",apiHeaders=new Headers({"X-API-KEY":"72694e5b5dee4706edc0acad3d4291",Accept:"application/json","Cache-Control":"no-cache"});function fetchAvatarsFromServer(t){fetch("https://api.uifaces.co/"+(t||queryParams)+"&limit=72&",{method:"GET",headers:apiHeaders}).then(function(e){return e.json()}).then(function(e){var t="";e.forEach(function(e){t+=createFigureHtml(e.photo,e.name)}),loadingPhotos.classList.add("hide"),galleryCollection.classList.remove("hide"),galleryCollection.innerHTML=t}).catch(function(e){console.error(e.message),fetchAvatarsFromServer(t)})}function createFigureHtml(e,t){return'<figure><img class="avatar-figure" alt="'.concat(t||e,'" width="92" src="').concat(e,'" /></figure>')}function getHtmlFigureGalleryString(e){var t="";return e.forEach(function(e){t+=createFigureHtml(e)}),t}galleryCollection.addEventListener("click",function(o){var r;o.target&&o.target.matches("figure")&&(r=o.target.children[0],selectedPhotosArea.classList.contains("show")||0!==photoBucketArray.length||selectedPhotosArea.classList.add("show"),photoBucketArray.includes(r.src)?photoBucketArray.forEach(function(e,t){e===r.src&&(photoBucketArray.splice(t,1),o.target.classList.remove("selected"))}):(photoBucketArray.push(r.src),o.target.classList.add("selected")),photoBucket.innerHTML=getHtmlFigureGalleryString([].concat(photoBucketArray)),amount.innerHTML=photoBucketArray.length,0===photoBucketArray.length&&selectedPhotosArea.classList.contains("show")&&selectedPhotosArea.classList.remove("show"))}),fetchAvatarsFromServer(window.location.search),applySelectedFilters.addEventListener("click",function(){filterForm.submit()}),showPopularAvatars.addEventListener("click",function(){loadingPhotos.classList.remove("hide"),galleryCollection.classList.add("hide"),fetchAvatarsFromServer()}),downloadAvatars.addEventListener("click",function(){0<photoBucketArray.length&&(document.location.search="?download="+photoBucketArray.join(",").toString())});